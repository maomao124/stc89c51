C51 COMPILER V9.00   MUSIC1                                                                12/02/2022 15:19:36 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MUSIC1
OBJECT MODULE PLACED IN music1.OBJ
COMPILER INVOKED BY: D:\soft\C51\BIN\C51.EXE music1.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <REGX52.H>
   2          
   3          
   4          unsigned char Count;
   5          sbit _Speak =P2^3 ;                     //讯响器控制脚　
   6          
   7          unsigned char code SONG[] ={      //祝你平安
   8          0x26,0x20,0x20,0x20,0x20,0x20,0x26,0x10,0x20,0x10,0x20,0x80,0x26,0x20,0x30,0x20,
   9          0x30,0x20,0x39,0x10,0x30,0x10,0x30,0x80,0x26,0x20,0x20,0x20,0x20,0x20,0x1c,0x20,
  10          0x20,0x80,0x2b,0x20,0x26,0x20,0x20,0x20,0x2b,0x10,0x26,0x10,0x2b,0x80,0x26,0x20,
  11          0x30,0x20,0x30,0x20,0x39,0x10,0x26,0x10,0x26,0x60,0x40,0x10,0x39,0x10,0x26,0x20,
  12          0x30,0x20,0x30,0x20,0x39,0x10,0x26,0x10,0x26,0x80,0x26,0x20,0x2b,0x10,0x2b,0x10,
  13          0x2b,0x20,0x30,0x10,0x39,0x10,0x26,0x10,0x2b,0x10,0x2b,0x20,0x2b,0x40,0x40,0x20,
  14          0x20,0x10,0x20,0x10,0x2b,0x10,0x26,0x30,0x30,0x80,0x18,0x20,0x18,0x20,0x26,0x20,
  15          0x20,0x20,0x20,0x40,0x26,0x20,0x2b,0x20,0x30,0x20,0x30,0x20,0x1c,0x20,0x20,0x20,
  16          0x20,0x80,0x1c,0x20,0x1c,0x20,0x1c,0x20,0x30,0x20,0x30,0x60,0x39,0x10,0x30,0x10,
  17          0x20,0x20,0x2b,0x10,0x26,0x10,0x2b,0x10,0x26,0x10,0x26,0x10,0x2b,0x10,0x2b,0x80,
  18          0x18,0x20,0x18,0x20,0x26,0x20,0x20,0x20,0x20,0x60,0x26,0x10,0x2b,0x20,0x30,0x20,
  19          0x30,0x20,0x1c,0x20,0x20,0x20,0x20,0x80,0x26,0x20,0x30,0x10,0x30,0x10,0x30,0x20,
  20          0x39,0x20,0x26,0x10,0x2b,0x10,0x2b,0x20,0x2b,0x40,0x40,0x10,0x40,0x10,0x20,0x10,
  21          0x20,0x10,0x2b,0x10,0x26,0x30,0x30,0x80,0x00,
  22                                            //路边的野华不要采
  23          0x30,0x1C,0x10,0x20,0x40,0x1C,0x10,0x18,0x10,0x20,0x10,0x1C,0x10,0x18,0x40,0x1C,
  24          0x20,0x20,0x20,0x1C,0x20,0x18,0x20,0x20,0x80,0xFF,0x20,0x30,0x1C,0x10,0x18,0x20,
  25          0x15,0x20,0x1C,0x20,0x20,0x20,0x26,0x40,0x20,0x20,0x2B,0x20,0x26,0x20,0x20,0x20,
  26          0x30,0x80,0xFF,0x20,0x20,0x1C,0x10,0x18,0x10,0x20,0x20,0x26,0x20,0x2B,0x20,0x30,
  27          0x20,0x2B,0x40,0x20,0x20,0x1C,0x10,0x18,0x10,0x20,0x20,0x26,0x20,0x2B,0x20,0x30,
  28          0x20,0x2B,0x40,0x20,0x30,0x1C,0x10,0x18,0x20,0x15,0x20,0x1C,0x20,0x20,0x20,0x26,
  29          0x40,0x20,0x20,0x2B,0x20,0x26,0x20,0x20,0x20,0x30,0x80,0x20,0x30,0x1C,0x10,0x20,
  30          0x10,0x1C,0x10,0x20,0x20,0x26,0x20,0x2B,0x20,0x30,0x20,0x2B,0x40,0x20,0x15,0x1F,
  31          0x05,0x20,0x10,0x1C,0x10,0x20,0x20,0x26,0x20,0x2B,0x20,0x30,0x20,0x2B,0x40,0x20,
  32          0x30,0x1C,0x10,0x18,0x20,0x15,0x20,0x1C,0x20,0x20,0x20,0x26,0x40,0x20,0x20,0x2B,
  33          0x20,0x26,0x20,0x20,0x20,0x30,0x30,0x20,0x30,0x1C,0x10,0x18,0x40,0x1C,0x20,0x20,
  34          0x20,0x26,0x40,0x13,0x60,0x18,0x20,0x15,0x40,0x13,0x40,0x18,0x80,0x00,
  35          
  36          };
  37          
  38          void Time0_Init()
  39          {
  40   1              TMOD = 0x01;
  41   1              IE       = 0x82;
  42   1              TH0  = 0xD8;
  43   1              TL0  = 0xEF;            //12MZ晶振，10ms
  44   1      }
  45          
  46          void Time0_Int() interrupt 1
  47          {
  48   1              TH0 = 0xD8;
  49   1              TL0 = 0xEF;
  50   1              Count++;                        //长度加1
  51   1      }
  52          
  53          /*-------------------------------------------------
  54          功能:1MS延时子程序
  55          -------------------------------------------------*/
C51 COMPILER V9.00   MUSIC1                                                                12/02/2022 15:19:36 PAGE 2   

  56          void Delay_xMs(unsigned int x)
  57          {
  58   1          unsigned int i,j;
  59   1          for( i =0;i < x;i++ )
  60   1          {
  61   2              for( j =0;j<3;j++ );
  62   2          }
  63   1      }
  64          
  65          /*-------------------------------------------------
  66          功能:歌曲播放子程序i为播放哪一段曲目
  67          -------------------------------------------------*/
  68          void Play_Song(unsigned char i)
  69          {
  70   1              unsigned char Temp1,Temp2;
  71   1              unsigned int Addr;
  72   1              Count = 0;                                              //中断计数器清0
  73   1              Addr = i * 217;
  74   1              while(1)
  75   1              {
  76   2                      Temp1 = SONG[Addr++];
  77   2                  if ( Temp1 == 0xFF )          //休止符
  78   2                  {
  79   3                      TR0 = 0;
  80   3                      Delay_xMs(100);
  81   3                  }
  82   2                  else if ( Temp1 == 0x00 )     //歌曲结束符
  83   2                  {
  84   3                      return;
  85   3                  }
  86   2                  else
  87   2                  {
  88   3                      Temp2 = SONG[Addr++];
  89   3                      TR0 = 1;
  90   3                              while(1)
  91   3                              {
  92   4                              _Speak = ~_Speak;
  93   4                              Delay_xMs(Temp1);
  94   4                              if ( Temp2 == Count )
  95   4                              {
  96   5                                      Count = 0;
  97   5                                      break;
  98   5                              }
  99   4                      }
 100   3                  }
 101   2              }
 102   1      }
 103          
 104          
 105          
 106          void music1()
 107          {
 108   1              Play_Song(0);           //播放
 109   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    158    ----
   CONSTANT SIZE    =    407    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       3
C51 COMPILER V9.00   MUSIC1                                                                12/02/2022 15:19:36 PAGE 3   

   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
